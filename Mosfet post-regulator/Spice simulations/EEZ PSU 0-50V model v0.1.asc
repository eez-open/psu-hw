Version 4
SHEET 1 20904 1220
WIRE 4944 -6016 4368 -6016
WIRE 5040 -5968 5008 -5968
WIRE 5200 -5968 5040 -5968
WIRE 5840 -5968 5280 -5968
WIRE 5040 -5904 5040 -5968
WIRE 4160 -5840 3984 -5840
WIRE 4448 -5840 4224 -5840
WIRE 5136 -5824 5104 -5824
WIRE 3392 -5792 3312 -5792
WIRE 3504 -5792 3472 -5792
WIRE 3696 -5792 3664 -5792
WIRE 3984 -5792 3984 -5840
WIRE 3984 -5792 3776 -5792
WIRE 4320 -5792 4144 -5792
WIRE 4608 -5792 4320 -5792
WIRE 4688 -5792 4608 -5792
WIRE 4784 -5792 4688 -5792
WIRE 4912 -5792 4912 -5824
WIRE 4912 -5792 4880 -5792
WIRE 4944 -5792 4944 -5920
WIRE 4944 -5792 4912 -5792
WIRE 5040 -5792 5040 -5824
WIRE 5040 -5792 4944 -5792
WIRE 5104 -5792 5104 -5824
WIRE 5104 -5792 5040 -5792
WIRE 5536 -5792 5104 -5792
WIRE 5760 -5792 5632 -5792
WIRE 5840 -5792 5840 -5968
WIRE 5840 -5792 5760 -5792
WIRE 5888 -5792 5840 -5792
WIRE 6032 -5792 5968 -5792
WIRE 6544 -5792 6032 -5792
WIRE 6752 -5792 6544 -5792
WIRE 6928 -5792 6752 -5792
WIRE 6960 -5792 6928 -5792
WIRE 3312 -5760 3312 -5792
WIRE 4448 -5760 4448 -5840
WIRE 4448 -5760 4272 -5760
WIRE 6752 -5760 6752 -5792
WIRE 3872 -5744 3840 -5744
WIRE 3984 -5744 3984 -5792
WIRE 3984 -5744 3936 -5744
WIRE 4032 -5744 3984 -5744
WIRE 4144 -5744 4144 -5792
WIRE 4144 -5744 4096 -5744
WIRE 4448 -5728 4448 -5760
WIRE 5840 -5728 5840 -5792
WIRE 5936 -5728 5840 -5728
WIRE 3504 -5712 3488 -5712
WIRE 4800 -5712 4800 -5744
WIRE 5616 -5712 5616 -5744
WIRE 5680 -5712 5616 -5712
WIRE 5760 -5712 5760 -5792
WIRE 5616 -5696 5616 -5712
WIRE 5936 -5696 5936 -5728
WIRE 6544 -5680 6544 -5792
WIRE 3312 -5664 3312 -5680
WIRE 3488 -5664 3488 -5712
WIRE 3488 -5664 3312 -5664
WIRE 5760 -5664 5760 -5712
WIRE 3840 -5648 3840 -5744
WIRE 3840 -5648 3792 -5648
WIRE 4368 -5632 4368 -6016
WIRE 4608 -5632 4608 -5728
WIRE 4688 -5632 4688 -5712
WIRE 4688 -5632 4608 -5632
WIRE 4800 -5632 4688 -5632
WIRE 6640 -5632 6608 -5632
WIRE 6752 -5632 6752 -5680
WIRE 6752 -5632 6720 -5632
WIRE 3792 -5616 3792 -5648
WIRE 4448 -5616 4448 -5648
WIRE 4592 -5616 4448 -5616
WIRE 3312 -5584 3312 -5664
WIRE 5936 -5584 5936 -5616
WIRE 3840 -5568 3840 -5648
WIRE 3872 -5568 3840 -5568
WIRE 3984 -5568 3936 -5568
WIRE 4032 -5568 3984 -5568
WIRE 4144 -5568 4144 -5744
WIRE 4144 -5568 4096 -5568
WIRE 4944 -5552 4944 -5792
WIRE 4608 -5536 4592 -5536
WIRE 4688 -5536 4688 -5632
WIRE 4688 -5536 4672 -5536
WIRE 5296 -5536 5264 -5536
WIRE 6544 -5536 6544 -5584
WIRE 6640 -5536 6544 -5536
WIRE 6752 -5536 6752 -5632
WIRE 6752 -5536 6720 -5536
WIRE 4448 -5520 4448 -5616
WIRE 5760 -5520 5760 -5600
WIRE 5888 -5520 5760 -5520
WIRE 6032 -5520 6032 -5792
WIRE 6032 -5520 5984 -5520
WIRE 3664 -5504 3664 -5712
WIRE 3984 -5504 3984 -5568
WIRE 3984 -5504 3664 -5504
WIRE 4176 -5504 3984 -5504
WIRE 4272 -5504 4272 -5760
WIRE 4272 -5504 4240 -5504
WIRE 4688 -5504 4688 -5536
WIRE 6752 -5504 6752 -5536
WIRE 5088 -5488 5040 -5488
WIRE 5184 -5488 5088 -5488
WIRE 5264 -5488 5264 -5536
WIRE 5264 -5488 5184 -5488
WIRE 5376 -5488 5264 -5488
WIRE 5456 -5488 5376 -5488
WIRE 5616 -5488 5616 -5632
WIRE 5616 -5488 5552 -5488
WIRE 6096 -5488 5616 -5488
WIRE 6224 -5488 6160 -5488
WIRE 6384 -5488 6288 -5488
WIRE 6432 -5488 6384 -5488
WIRE 6544 -5488 6544 -5536
WIRE 6544 -5488 6496 -5488
WIRE 6704 -5488 6544 -5488
WIRE 4368 -5456 4368 -5552
WIRE 4400 -5456 4368 -5456
WIRE 4592 -5456 4592 -5536
WIRE 4624 -5456 4592 -5456
WIRE 5184 -5456 5184 -5488
WIRE 5376 -5456 5376 -5488
WIRE 5760 -5456 5760 -5520
WIRE 6384 -5456 6384 -5488
WIRE 5088 -5440 5088 -5488
WIRE 4368 -5408 4368 -5456
WIRE 6272 -5408 6240 -5408
WIRE 6320 -5408 6272 -5408
WIRE 4592 -5392 4592 -5456
WIRE 3312 -5376 3312 -5504
WIRE 4688 -5376 4688 -5408
WIRE 5504 -5360 5504 -5424
WIRE 5760 -5360 5760 -5392
WIRE 5760 -5360 5504 -5360
WIRE 6752 -5360 6752 -5408
WIRE 5088 -5344 5088 -5376
WIRE 6272 -5328 6272 -5408
WIRE 6384 -5328 6384 -5360
WIRE 5184 -5312 5184 -5376
WIRE 5376 -5312 5376 -5376
WIRE 5504 -5296 5504 -5360
WIRE 5552 -5296 5504 -5296
WIRE 5696 -5296 5632 -5296
WIRE 4368 -5280 4368 -5328
WIRE 4448 -5280 4448 -5456
WIRE 4448 -5280 4368 -5280
WIRE 4592 -5280 4592 -5328
WIRE 4592 -5280 4448 -5280
WIRE 4688 -5280 4688 -5296
WIRE 4688 -5280 4592 -5280
WIRE 4944 -5280 4944 -5488
WIRE 4944 -5280 4688 -5280
WIRE 5696 -5280 5696 -5296
WIRE 5280 -5264 5248 -5264
WIRE 5312 -5264 5280 -5264
WIRE 4448 -5248 4448 -5280
WIRE 5504 -5248 5504 -5296
WIRE 6272 -5232 6272 -5248
WIRE 6384 -5232 6384 -5248
WIRE 6384 -5232 6272 -5232
WIRE 6384 -5200 6384 -5232
WIRE 5184 -5168 5184 -5216
WIRE 5280 -5168 5280 -5264
WIRE 5280 -5168 5184 -5168
WIRE 5184 -5136 5184 -5168
WIRE 5376 -5136 5376 -5216
WIRE 5504 -5136 5504 -5168
WIRE 5504 -5136 5376 -5136
WIRE 4320 -5120 4320 -5792
WIRE 4944 -5120 4320 -5120
WIRE 5040 -5120 5040 -5488
WIRE 5040 -5120 5008 -5120
WIRE 5280 -5088 5248 -5088
WIRE 5376 -5088 5376 -5136
WIRE 5840 -5072 5840 -5728
WIRE 5040 -5056 5040 -5120
WIRE 5504 -5024 5504 -5136
WIRE 5184 -5008 5184 -5040
WIRE 5376 -4976 5376 -5008
WIRE 5840 -4976 5840 -4992
WIRE 5840 -4976 5568 -4976
WIRE 5040 -4928 5040 -4992
WIRE 5840 -4928 5840 -4976
WIRE 5184 -4896 5184 -4928
WIRE 5504 -4816 5504 -4928
WIRE 5840 -4816 5840 -4848
WIRE 6928 -4816 6928 -5792
WIRE 6928 -4816 6192 -4816
WIRE 3616 -4784 3616 -4832
WIRE 3728 -4784 3728 -4832
WIRE 3840 -4784 3840 -4832
WIRE 3952 -4784 3952 -4816
WIRE 6544 -4768 6368 -4768
WIRE 6608 -4768 6544 -4768
WIRE 6544 -4736 6544 -4768
WIRE 6608 -4720 6608 -4768
WIRE 6928 -4688 6928 -4816
WIRE 7024 -4688 6928 -4688
WIRE 7248 -4688 7024 -4688
WIRE 3616 -4656 3616 -4704
WIRE 3728 -4656 3728 -4704
WIRE 3840 -4656 3840 -4704
WIRE 3952 -4656 3952 -4704
WIRE 5888 -4640 5856 -4640
WIRE 5984 -4640 5968 -4640
WIRE 6224 -4640 6048 -4640
WIRE 6544 -4624 6544 -4656
WIRE 6624 -4624 6544 -4624
WIRE 6736 -4624 6704 -4624
WIRE 6816 -4624 6800 -4624
WIRE 7248 -4624 7248 -4688
WIRE 4864 -4608 4816 -4608
WIRE 4976 -4608 4944 -4608
WIRE 5152 -4608 5040 -4608
WIRE 7024 -4608 7024 -4688
WIRE 5152 -4592 5152 -4608
WIRE 5152 -4592 5120 -4592
WIRE 5232 -4592 5152 -4592
WIRE 5792 -4560 5792 -4592
WIRE 5856 -4560 5856 -4640
WIRE 5888 -4560 5856 -4560
WIRE 6064 -4560 5968 -4560
WIRE 5856 -4544 5856 -4560
WIRE 5856 -4544 5824 -4544
WIRE 6544 -4544 6544 -4624
WIRE 6576 -4544 6544 -4544
WIRE 6672 -4544 6656 -4544
WIRE 6720 -4544 6672 -4544
WIRE 6816 -4544 6816 -4624
WIRE 6816 -4544 6800 -4544
WIRE 6928 -4544 6928 -4688
WIRE 6928 -4544 6816 -4544
WIRE 5504 -4528 5504 -4736
WIRE 5584 -4528 5504 -4528
WIRE 5664 -4528 5648 -4528
WIRE 5760 -4528 5664 -4528
WIRE 4800 -4512 4768 -4512
WIRE 4928 -4512 4800 -4512
WIRE 5072 -4512 4928 -4512
WIRE 5856 -4512 5824 -4512
WIRE 6480 -4512 6480 -4528
WIRE 7024 -4512 7024 -4544
WIRE 4800 -4496 4800 -4512
WIRE 6544 -4496 6544 -4544
WIRE 6544 -4496 6512 -4496
WIRE 5792 -4480 5792 -4496
WIRE 5856 -4480 5856 -4512
WIRE 5888 -4480 5856 -4480
WIRE 6400 -4480 5968 -4480
WIRE 6448 -4480 6400 -4480
WIRE 6928 -4480 6928 -4544
WIRE 6928 -4480 6672 -4480
WIRE 4928 -4464 4928 -4512
WIRE 4960 -4464 4928 -4464
WIRE 5120 -4464 5120 -4496
WIRE 5120 -4464 5040 -4464
WIRE 6544 -4464 6512 -4464
WIRE 5120 -4432 5120 -4464
WIRE 5664 -4432 5664 -4528
WIRE 5664 -4432 5632 -4432
WIRE 5696 -4432 5664 -4432
WIRE 5856 -4432 5856 -4480
WIRE 5856 -4432 5760 -4432
WIRE 6480 -4432 6480 -4448
WIRE 6928 -4432 6672 -4432
WIRE 5856 -4400 5856 -4432
WIRE 5872 -4400 5856 -4400
WIRE 6192 -4400 6192 -4816
WIRE 6192 -4400 6016 -4400
WIRE 4800 -4384 4800 -4416
WIRE 6400 -4368 6400 -4480
WIRE 6400 -4368 6336 -4368
WIRE 6416 -4368 6400 -4368
WIRE 6544 -4368 6544 -4464
WIRE 6544 -4368 6496 -4368
WIRE 6576 -4368 6544 -4368
WIRE 6672 -4368 6656 -4368
WIRE 6688 -4368 6672 -4368
WIRE 6816 -4368 6768 -4368
WIRE 6928 -4368 6928 -4432
WIRE 6928 -4368 6816 -4368
WIRE 5664 -4352 5664 -4432
WIRE 5760 -4352 5664 -4352
WIRE 5856 -4352 5856 -4400
WIRE 5856 -4352 5824 -4352
WIRE 4912 -4336 4832 -4336
WIRE 5072 -4336 5072 -4352
WIRE 5072 -4336 4992 -4336
WIRE 6064 -4336 6064 -4560
WIRE 6064 -4336 6032 -4336
WIRE 6928 -4320 6928 -4368
WIRE 7024 -4320 7024 -4432
WIRE 7024 -4320 6928 -4320
WIRE 7248 -4320 7248 -4544
WIRE 7248 -4320 7024 -4320
WIRE 5072 -4304 5072 -4336
WIRE 6064 -4304 6064 -4336
WIRE 4832 -4288 4832 -4336
WIRE 5024 -4288 4832 -4288
WIRE 6544 -4288 6544 -4368
WIRE 6624 -4288 6544 -4288
WIRE 6736 -4288 6704 -4288
WIRE 6816 -4288 6816 -4368
WIRE 6816 -4288 6800 -4288
WIRE 4832 -4240 4832 -4288
WIRE 6224 -4208 6224 -4640
WIRE 6928 -4208 6928 -4320
WIRE 6928 -4208 6224 -4208
WIRE 6960 -4208 6928 -4208
WIRE 5072 -4192 5072 -4208
WIRE 5120 -4192 5072 -4192
WIRE 5248 -4192 5200 -4192
WIRE 6064 -4192 6064 -4224
WIRE 4832 -4144 4832 -4160
WIRE 5072 -4128 5072 -4192
WIRE 5088 -4128 5072 -4128
WIRE 5200 -4128 5168 -4128
WIRE 5296 -4128 5264 -4128
WIRE 6368 -4128 6368 -4768
WIRE 6528 -4128 6368 -4128
WIRE 6736 -4128 6528 -4128
WIRE 5296 -4112 5296 -4128
WIRE 6528 -4032 6528 -4128
WIRE 5840 -4016 5840 -4048
WIRE 5936 -4000 5872 -4000
WIRE 6096 -4000 6016 -4000
WIRE 5504 -3984 5504 -4528
WIRE 5616 -3984 5504 -3984
WIRE 5696 -3984 5680 -3984
WIRE 5808 -3984 5696 -3984
WIRE 5904 -3968 5872 -3968
WIRE 5840 -3920 5840 -3952
WIRE 5904 -3920 5904 -3968
WIRE 5936 -3920 5904 -3920
WIRE 6192 -3920 6192 -4400
WIRE 6192 -3920 6080 -3920
WIRE 6528 -3904 6528 -3952
WIRE 6608 -3904 6528 -3904
WIRE 6768 -3904 6688 -3904
WIRE 6928 -3904 6928 -4208
WIRE 6928 -3904 6848 -3904
WIRE 6928 -3888 6928 -3904
WIRE 6432 -3856 6432 -3936
WIRE 6528 -3840 6528 -3904
WIRE 6528 -3840 6464 -3840
WIRE 5696 -3824 5696 -3984
WIRE 5712 -3824 5696 -3824
WIRE 5792 -3824 5776 -3824
WIRE 5904 -3824 5904 -3920
WIRE 5904 -3824 5872 -3824
WIRE 5936 -3824 5904 -3824
WIRE 6288 -3824 6016 -3824
WIRE 6400 -3824 6288 -3824
WIRE 6528 -3808 6464 -3808
WIRE 6096 -3760 6096 -4000
WIRE 6096 -3760 6064 -3760
WIRE 6528 -3760 6528 -3808
WIRE 6608 -3760 6528 -3760
WIRE 6768 -3760 6688 -3760
WIRE 6928 -3760 6928 -3808
WIRE 6928 -3760 6848 -3760
WIRE 5696 -3744 5696 -3824
WIRE 5792 -3744 5696 -3744
WIRE 5904 -3744 5904 -3824
WIRE 5904 -3744 5856 -3744
WIRE 6096 -3728 6096 -3760
WIRE 6432 -3728 6432 -3792
WIRE 5696 -3712 5696 -3744
WIRE 5696 -3712 5664 -3712
WIRE 6928 -3712 6928 -3760
WIRE 6288 -3680 6288 -3824
WIRE 6288 -3680 6272 -3680
WIRE 6336 -3680 6288 -3680
WIRE 6528 -3680 6528 -3760
WIRE 6528 -3680 6416 -3680
WIRE 6096 -3616 6096 -3648
FLAG 3728 -4656 0
FLAG 3728 -4832 +V
FLAG 6064 -4192 0
FLAG 6608 -4720 0
FLAG 5840 -4816 0
FLAG 5792 -4480 +V
FLAG 6480 -4432 +V
FLAG 5792 -4592 -V
FLAG 6480 -4528 -V
FLAG 6032 -4336 U_SET
IOPIN 6032 -4336 Out
FLAG 6960 -5792 Vout+
IOPIN 6960 -5792 Out
FLAG 5136 -5824 Vin
IOPIN 5136 -5824 Out
FLAG 6336 -4368 U_MON
IOPIN 6336 -4368 Out
FLAG 5632 -4432 CV_out
IOPIN 5632 -4432 Out
FLAG 6928 -3712 0
FLAG 3616 -4656 0
FLAG 3616 -4832 +5V
FLAG 6960 -4208 Vout-
IOPIN 6960 -4208 Out
FLAG 3840 -4656 0
FLAG 3840 -4832 -V
FLAG 5696 -5216 0
FLAG 5280 -5088 +5V
FLAG 5376 -4976 0
FLAG 5296 -5536 Vbias
IOPIN 5296 -5536 Out
FLAG 6752 -5360 0
FLAG 6240 -5408 DP
IOPIN 6240 -5408 Out
FLAG 4448 -5248 0
FLAG 3312 -5376 0
FLAG 3792 -5616 0
FLAG 4912 -5824 Vpreg
FLAG 5184 -4896 OE
IOPIN 5184 -4896 Out
FLAG 5040 -4928 0
FLAG 6096 -3616 0
FLAG 5840 -3920 +V
FLAG 5840 -4048 -V
FLAG 6064 -3760 I_SET
IOPIN 6064 -3760 Out
FLAG 5664 -3712 CC_out
IOPIN 5664 -3712 Out
FLAG 6272 -3680 I_MON
IOPIN 6272 -3680 Out
FLAG 6736 -4128 COM
IOPIN 6736 -4128 In
FLAG 6432 -3728 +V
FLAG 5232 -4592 OE
IOPIN 5232 -4592 Out
FLAG 4800 -4384 0
FLAG 5248 -4192 DP
IOPIN 5248 -4192 Out
FLAG 4832 -4144 0
FLAG 5120 -4432 0
FLAG 5072 -4352 +5V
FLAG 4816 -4608 +5V
FLAG 5296 -4112 0
FLAG 6432 -3936 -V
FLAG 4768 -4512 OE_SW
FLAG 5088 -5344 0
FLAG 3952 -4656 0
FLAG 3952 -4816 -Vdp
FLAG 6384 -5200 -Vdp
SYMBOL res 5664 -5696 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R33
SYMATTR Value 1k
SYMBOL Opamps\\opamp2 5792 -4464 R180
WINDOW 3 21 110 Left 2
SYMATTR Value TL072
SYMATTR InstName U1
SYMBOL res 5488 -4832 R0
WINDOW 0 -17 38 Right 2
WINDOW 3 -15 66 Right 2
SYMATTR InstName R2
SYMATTR Value 470
SYMBOL res 5984 -4576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 5984 -4496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 5760 -4448 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 120p
SYMBOL voltage 3728 -4800 R0
SYMATTR InstName Vdd
SYMATTR Value 5
SYMBOL voltage 6064 -4320 R0
WINDOW 3 -48 53 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 1.2 30m 100u 100u 20m 50m 10)
SYMATTR InstName Uset
SYMBOL Opamps\\opamp2 6480 -4416 R180
SYMATTR InstName U2
SYMATTR Value TL072
SYMBOL res 6672 -4560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 130k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6672 -4384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 130k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6816 -4560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 20k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6784 -4384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 20k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6560 -4640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 7.5k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6512 -4384 R90
WINDOW 0 -2 69 VBottom 2
WINDOW 3 35 67 VTop 2
SYMATTR InstName R11
SYMATTR Value 7.5k
SYMATTR SpiceLine tol=0.1
SYMBOL cap 7008 -4608 R0
SYMATTR InstName C4
SYMATTR Value 470n
SYMBOL res 7008 -4528 R0
SYMATTR InstName R12
SYMATTR Value 1
SYMBOL res 6720 -4640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 6720 -4304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 6800 -4640 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 47p
SYMBOL cap 6800 -4304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 47p
SYMBOL cap 6656 -4432 R0
WINDOW 0 -15 -15 Left 2
WINDOW 3 -19 12 Left 2
SYMATTR InstName C7
SYMATTR Value 2.2n
SYMBOL cap 6656 -4544 R0
WINDOW 0 35 28 Left 2
WINDOW 3 25 57 Left 2
SYMATTR InstName C8
SYMATTR Value 2.2n
SYMBOL res 5824 -5088 R0
SYMATTR InstName R16
SYMATTR Value 16k
SYMBOL res 5824 -4944 R0
SYMATTR InstName R17
SYMATTR Value 560
SYMBOL diode 5632 -5632 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 5776 -5392 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL zener 5744 -5664 R0
WINDOW 3 -106 67 Left 2
WINDOW 0 -37 35 Left 2
SYMATTR Value BZX384B13
SYMATTR InstName D4
SYMBOL res 5968 -4416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 220
SYMBOL cap 6016 -4416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 560p
SYMBOL nmos 5536 -5744 R270
WINDOW 0 64 24 VRight 2
WINDOW 3 95 23 VRight 2
SYMATTR InstName Q1
SYMATTR Value irfp260n
SYMATTR Prefix X
SYMBOL res 6912 -3904 R0
SYMATTR InstName Rsense
SYMATTR Value 20m
SYMBOL res 5984 -4656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R36
SYMATTR Value 220
SYMBOL cap 6048 -4656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value 1.5n
SYMBOL voltage 3616 -4800 R0
SYMATTR InstName Vcc
SYMATTR Value 5
SYMBOL voltage 3840 -4800 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vss
SYMATTR Value -5
SYMBOL res 5536 -5312 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 470
SYMBOL cap 5712 -5280 M0
SYMATTR InstName C9
SYMATTR Value 10n
SYMBOL diode 5760 -4336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D13
SYMATTR Value 1N4148
SYMBOL pnp 5312 -5216 M180
SYMATTR InstName Q7
SYMATTR Value BC556B
SYMBOL pnp 5248 -5216 R180
SYMATTR InstName Q8
SYMATTR Value BC556B
SYMBOL res 5168 -5472 R0
SYMATTR InstName R54
SYMATTR Value 220
SYMBOL res 5360 -5472 R0
SYMATTR InstName R55
SYMATTR Value 220
SYMBOL res 5360 -5104 R0
SYMATTR InstName R56
SYMATTR Value 51k
SYMBOL res 5488 -5264 R0
SYMATTR InstName R57
SYMATTR Value 100
SYMBOL npn 5248 -5136 M0
WINDOW 0 87 60 Left 2
WINDOW 3 81 28 Left 2
SYMATTR InstName Q9
SYMATTR Value BC546B
SYMBOL res 5200 -5024 M0
SYMATTR InstName R58
SYMATTR Value 1.8k
SYMBOL npn 5456 -5424 R270
WINDOW 0 135 14 VRight 2
WINDOW 3 102 15 VRight 2
SYMATTR InstName Q2
SYMATTR Value QBCP56-16
SYMBOL pmos 6704 -5408 M180
WINDOW 0 63 67 Left 2
WINDOW 3 64 35 Left 2
SYMATTR InstName Q4
SYMATTR Value IRF9640
SYMBOL res 6768 -5664 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R22
SYMATTR Value 2.2
SYMBOL pnp 6608 -5584 R180
WINDOW 0 81 64 Left 2
WINDOW 3 77 28 Left 2
SYMATTR InstName Q5
SYMATTR Value BC557B
SYMBOL res 6736 -5552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 2.2k
SYMBOL res 6736 -5648 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 2.2k
SYMBOL res 6400 -5232 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R27
SYMATTR Value 220
SYMBOL res 6288 -5232 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R28
SYMATTR Value 1k
SYMBOL diode 6496 -5504 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL Misc\\SCR 4432 -5520 R0
SYMATTR InstName U3
SYMATTR Value MCR100-003
SYMBOL res 4352 -5648 R0
SYMATTR InstName R13
SYMATTR Value 4.7K
SYMBOL res 4352 -5424 R0
SYMATTR InstName R18
SYMATTR Value 4.7K
SYMBOL res 4432 -5744 R0
SYMATTR InstName R26
SYMATTR Value 3.3k
SYMBOL res 4576 -5632 R0
WINDOW 0 -19 43 Right 2
WINDOW 3 -13 78 Right 2
SYMATTR InstName R31
SYMATTR Value 10k
SYMBOL zener 4608 -5328 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value BZX384B5V6
SYMBOL cap 4672 -5552 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 560p
SYMBOL res 4704 -5280 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R32
SYMATTR Value 100
SYMBOL npn 4624 -5504 R0
SYMATTR InstName Q12
SYMATTR Value BD139
SYMBOL zener 4624 -5728 R180
WINDOW 0 45 36 Left 2
WINDOW 3 39 6 Left 2
SYMATTR InstName D6
SYMATTR Value BZX384B13
SYMBOL res 4672 -5808 R0
SYMATTR InstName R34
SYMATTR Value 1.5k
SYMBOL res 4784 -5728 R0
SYMATTR InstName R35
SYMATTR Value 100
SYMBOL pmos 4880 -5744 M270
WINDOW 3 -19 67 VLeft 2
SYMATTR Value IRF5210
SYMATTR InstName M1
SYMATTR Prefix X
SYMBOL cap 4928 -5552 R0
SYMATTR InstName C14
SYMATTR Value 10000µ
SYMATTR SpiceLine Rser=15m
SYMBOL schottky 3872 -5760 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 4032 -5760 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D9
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3872 -5584 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D10
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 4032 -5584 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D11
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind2 3488 -5808 R0
SYMATTR InstName L1
SYMATTR Value 100m
SYMATTR Type ind
SYMBOL ind2 3680 -5808 M0
SYMATTR InstName L2
SYMATTR Value 100m
SYMATTR Type ind
SYMBOL res 3792 -5808 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 0.1
SYMBOL res 3488 -5808 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 0.1
SYMBOL voltage 3312 -5776 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 67 50)
SYMBOL diode 4160 -5824 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D12
SYMATTR Value DI_1N4004
SYMBOL diode 4176 -5488 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D14
SYMATTR Value DI_1N4004
SYMBOL res 5184 -5952 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R41
SYMATTR Value 180k
SYMBOL res 5024 -5920 R0
SYMATTR InstName R42
SYMATTR Value 39k
SYMBOL pnp 5008 -6016 M0
WINDOW 0 77 38 Left 2
WINDOW 3 70 70 Left 2
SYMATTR InstName Q13
SYMATTR Value BC556B
SYMBOL cap 5024 -5056 R0
SYMATTR InstName C18
SYMATTR Value 470µ
SYMBOL diode 4944 -5104 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D15
SYMATTR Value DI_1N4004
SYMBOL res 3296 -5600 R0
SYMATTR InstName R20
SYMATTR Value 1000k
SYMBOL diode 6096 -5472 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D16
SYMATTR Value 1N4148
SYMBOL zener 6288 -5504 R90
WINDOW 3 36 32 VTop 2
WINDOW 0 -4 32 VBottom 2
SYMATTR Value BZX84C6V2L
SYMATTR InstName D17
SYMBOL Opamps\\opamp2 5840 -3920 R180
WINDOW 3 27 123 Left 2
WINDOW 0 31 89 Left 2
SYMATTR Value TL072
SYMATTR InstName U4
SYMBOL res 6032 -4016 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 10k
SYMBOL res 6032 -3840 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 10k
SYMBOL cap 5776 -3840 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 1n
SYMBOL voltage 6096 -3744 R0
WINDOW 3 69 60 Center 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 0.3
SYMATTR InstName Iset1
SYMBOL res 6032 -3936 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R44
SYMATTR Value 10k
SYMBOL cap 6080 -3936 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C17
SYMATTR Value 1n
SYMBOL res 5888 -3840 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R46
SYMATTR Value 11k
SYMBOL res 6864 -3920 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R48
SYMATTR Value 51
SYMATTR SpiceLine tol=0.1
SYMBOL res 6864 -3776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R49
SYMATTR Value 51
SYMATTR SpiceLine tol=0.1
SYMBOL res 6432 -3696 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 47 58 VTop 2
SYMATTR InstName R50
SYMATTR Value 4.08k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6544 -3936 R180
WINDOW 0 -7 76 Right 2
WINDOW 3 -9 49 Right 2
SYMATTR InstName R51
SYMATTR Value 4.08k
SYMATTR SpiceLine tol=0.1
SYMBOL diode 5792 -3728 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D19
SYMATTR Value 1N4148
SYMBOL diode 5616 -3968 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode 5584 -4512 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D20
SYMATTR Value 1N4148
SYMBOL voltage 4800 -4512 R0
WINDOW 0 -35 32 Right 2
WINDOW 3 -44 67 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName OE_switch_simulation
SYMATTR Value 5
SYMBOL res 5056 -4480 R90
WINDOW 3 32 56 VTop 2
WINDOW 0 0 56 VBottom 2
SYMATTR Value 100K
SYMATTR InstName R19
SYMBOL voltage 4832 -4256 R0
WINDOW 0 -53 31 Right 2
WINDOW 3 -46 68 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName DP_switch_simulation
SYMATTR Value 0
SYMBOL res 5216 -4176 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL mylib\\pmos 5024 -4208 M180
SYMATTR InstName M2
SYMATTR Value BSS84
SYMBOL res 5008 -4320 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R39
SYMATTR Value 100k
SYMBOL nmos 5072 -4592 R0
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL LED 4976 -4624 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 72 32 VTop 2
SYMATTR InstName LED1
SYMATTR Value NSPW500BS
SYMBOL res 4960 -4592 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R45
SYMATTR Value 240
SYMBOL LED 5200 -4144 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 72 32 VTop 2
SYMATTR InstName LED2
SYMATTR Value NSPW500BS
SYMBOL res 5184 -4112 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R47
SYMATTR Value 240
SYMBOL npn 5888 -5584 M90
WINDOW 0 -16 68 VRight 2
WINDOW 3 75 5 VRight 2
SYMATTR InstName Q10
SYMATTR Value BC846B
SYMBOL res 5920 -5712 R0
SYMATTR InstName R7
SYMATTR Value 1K
SYMBOL res 5984 -5808 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 100m
SYMBOL npn 5568 -5024 M0
SYMATTR InstName Q3
SYMATTR Value ZTX653
SYMBOL Opamps\\OP27 6432 -3760 R180
SYMATTR InstName U5
SYMBOL npn 6320 -5456 R0
WINDOW 0 86 77 Left 2
WINDOW 3 85 108 Left 2
SYMATTR InstName Q6
SYMATTR Value QBCP56-16
SYMBOL res 7232 -4640 R0
SYMATTR InstName R1
SYMATTR Value 33
SYMBOL cap 5072 -5440 R0
SYMATTR InstName C2
SYMATTR Value 470n
SYMBOL res 6704 -3920 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R52
SYMATTR Value 51
SYMATTR SpiceLine tol=0.1
SYMBOL res 6704 -3776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R53
SYMATTR Value 51
SYMATTR SpiceLine tol=0.1
SYMBOL voltage 3952 -4800 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vdp
SYMATTR Value -9
TEXT 3920 -5352 Left 2 !.inc irfp260n.lib
TEXT 3920 -5320 Left 2 !.inc TL072.301
TEXT 5824 -4240 Left 1 ;Set Vout (0-2.5V for 0-50V)
TEXT 5520 -4192 Left 2 ;Voltage error amplifier
TEXT 6688 -4752 Left 2 ;Voltage sense amplifier
TEXT 3920 -5288 Left 2 !.inc QBCP56-16.lib
TEXT 3920 -5256 Left 2 !.include supertex.lib
TEXT 3920 -5128 Left 2 !.inc Zener-BZX384.lib
TEXT 3496 -5816 Left 2 !K1 L1 L2 0.9997
TEXT 3920 -5064 Left 2 !.inc mytransistors.lib
TEXT 3920 -5096 Left 2 !.inc MCR100_003.lib
TEXT 3920 -5160 Left 2 !.lib 1n4004.txt
TEXT 3920 -5000 Left 2 !.tran 0 400m 20m
TEXT 4152 -5192 Right 2 !.include supertex.lib
TEXT 3920 -5224 Left 2 !.inc irf5210.spi
TEXT 5840 -3672 Left 1 ;Set max. Iout (0-2.4V for 0-3A)
TEXT 6472 -3600 Left 2 ;Current shunt monitor (gain: 40V/V)
TEXT 5488 -3592 Left 2 ;Current error amplifier
TEXT 4520 -4720 Left 2 ;Output enable and Down-programmer controls
TEXT 6080 -5832 Left 2 ;Down-programmer
TEXT 4528 -4096 Left 2 ;Set to 5V to disable Down-programmer
TEXT 3920 -5032 Left 2 !.inc ZTX653.lib
RECTANGLE Normal 6960 -4784 6256 -4256 2
RECTANGLE Normal 5472 -4160 6144 -4704 2
RECTANGLE Normal 6896 -5168 6064 -5856 2
RECTANGLE Normal 6240 -4112 6896 -3568 2
RECTANGLE Normal 6144 -3568 5472 -4112 2
RECTANGLE Normal 7280 -4272 7088 -4736 2
RECTANGLE Normal 5312 -4736 4512 -4032 2
